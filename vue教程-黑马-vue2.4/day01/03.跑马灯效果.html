<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>案例1-跑马灯效果</title>
  <style>
    [v-cloak]{
      display: none;
    }
  </style>
</head>
<body>
  <div id="app">
    <input type="button" value="浪起来" @click="lang()">
    <input type="button" value="别浪" @click="stop()">
    <h3 v-cloak>{{ msg }}</h3>
  </div>
  <script src="./lib/vue.js"></script>
  <script>
    var vm=new Vue({
      el:"#app",
      data:{
        msg:"猥琐发育，别浪~~！",
        IntervalID:null
      },
      methods: {
        lang(){
          // var _this=this
          // setInterval(function(){
          //   var start=_this.msg.substring(0,1)
          //   var end=_this.msg.substring(1)
          //   _this.msg=end+start
          // },400)       
          // 改造成箭头函数,内部this就指向外部的this了
          if (this.IntervalID != null)
            return;
          this.IntervalID= setInterval(() => {
            var start=this.msg.substring(0,1)
            var end=this.msg.substring(1)
            this.msg=end+start
          },400)    
        },
        stop(){
          clearInterval(this.IntervalID)
          //每当清除来定时器，需要重新把定时器IntervalID设置为null
          this.IntervalID=null
        }
      },
    })
  </script>
</body>
</html>